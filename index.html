<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roteiro de Lubrificação</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="logo" aria-hidden="true">
        <!-- new wrench & drop SVG logo -->
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21.7 13.3l-2.4-2.4a1 1 0 0 0-1.4 0l-1 1-2.5-2.5 1-1a1 1 0 0 0 0-1.4L10.7 2.3a2 2 0 0 0-2.8 0L6.6 3.6a2 2 0 0 0 0 2.8l4 4a2 2 0 0 0 2.8 0l1-1 2.5 2.5-1 1a1 1 0 0 0 0 1.4l2.4 2.4a1 1 0 0 0 1.4 0l1.4-1.4a1 1 0 0 0 0-1.4z" fill="#0f6feb" opacity="0.95"/>
          <path d="M7 16c0-1.7 2.2-3.5 2.5-3.8.4-.4 1.1-.4 1.5 0 .3.3 2.5 2.1 2.5 3.8 0 1.9-1.6 3.5-3.5 3.5S7 17.9 7 16z" fill="#8fb9ff"/>
        </svg>
      </div>
      <div class="site-title">
        <div class="title">Roteiro de Lubrificação</div>
        <div class="subtitle">Registros, filtros e impressão</div>
      </div>
      <div class="header-actions">
        <div class="user-meta">v1.0 • Local</div>
      </div>
    </div>
  </header>

  <main class="container">

      <!-- Removido formulário duplicado para corrigir layout bugado -->
    <section class="card">
      <h2>Registrar lubrificação</h2>
      <!-- Área para mensagens visuais -->
      <div id="msgArea"></div>
      <form id="lubForm">
        <div class="grid">
          <label>
            Equipamento
            <input type="text" id="equipamento" required placeholder="Nome do equipamento">
          </label>
          <label>
            Patrimônio
            <input type="text" id="patrimonio" required placeholder="Número do patrimônio">
          </label>
          <label>
            Período/Intervalo
            <input type="text" id="periodo" required placeholder="Ex: semanal, mensal, 3 meses">
          </label>
        </div>
        <!-- ...campos do formulário... -->
        <div class="grid">
          <label>
            Data realizada
            <input type="date" id="data_realizada" required>
          </label>

          <label>
            Observações gerais
            <input type="text" id="observacoes" placeholder="Opcional">
          </label>
        </div>

        <div class="components-section">
          <h3>Componentes para Lubrificação</h3>
          <div id="componentsList">
            <!-- Componentes serão inseridos aqui via JS -->
          </div>
          
          <div class="add-component-form">
            <select id="componentType">
              <option value="">Selecione o tipo de componente</option>
              <option value="mancal">Mancal</option>
              <option value="guia">Guia Linear</option>
              <option value="rolamento">Rolamento</option>
              <option value="corrente">Corrente</option>
              <option value="redutor">Redutor</option>
              <option value="outro">Outro</option>
            </select>
            <input type="text" id="componentTypeOther" placeholder="Especifique o tipo" style="display: none;">
            <input type="number" id="componentQty" placeholder="Quantidade" min="1">
            <input type="text" id="componentLub" placeholder="Tipo de lubrificante">
            <input type="text" id="componentDesc" placeholder="Descrição/Observações">
            <button type="button" id="addComponentBtn" class="secondary">+ Adicionar Componente</button>
          </div>
        </div>

        <div class="actions">
          <button type="submit" id="saveBtn" class="btn-primary">Adicionar</button>
          <button type="button" id="clearBtn" class="btn-primary">Limpar formulário</button>
          <button type="button" id="clearAllBtn" class="danger">Apagar tudo</button>
        </div>
      </form>
    </section>

    <section class="card">
      <h2>Registros</h2>
      <div class="toolbar">
        <input type="text" id="search" placeholder="Buscar por equipamento ou patrimônio">
        <select id="filterPeriodo">
          <option value="">Filtrar por período</option>
          <option value="semanal">Semanal</option>
          <option value="mensal">Mensal</option>
          <option value="trimestral">Trimestral</option>
          <option value="semestral">Semestral</option>
          <option value="anual">Anual</option>
        </select>
      </div>

      <div class="table-wrapper">
        <table id="entriesTable">
          <thead>
            <tr>
              <th>Equipamento</th>
              <th>Patrimônio</th>
              <th>Período</th>
              <th>Data realizada</th>
              <th>Próxima Data</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div style="margin-top:18px; display:flex; gap:12px; justify-content:flex-end;">
        <button type="button" id="exportBtn" class="btn-primary">Exportar CSV</button>
        <button type="button" id="printBtn" class="btn-primary">Imprimir</button>
      </div>
    </section>

    <footer class="site-footer">
      <small>Arquivo salvo localmente no navegador (localStorage). Feche a janela para testar persistência.</small>
      <div class="dev-credit">Desenvolvido por Jonathan da Silva Oliveira</div>
    </footer>
  </main>

  <script src="app.js"></script>
</body>
</html>